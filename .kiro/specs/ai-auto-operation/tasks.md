# 实施计划

- [ ] 1. 项目初始化和基础架构搭建
  - 创建前后端项目结构
  - 配置TypeScript、ESLint、Prettier
  - 设置开发环境和构建工具
  - 初始化Git仓库和配置CI/CD
  - _需求: 所有需求的基础_

- [ ]* 1.1 配置属性测试框架
  - 安装fast-check库
  - 创建测试工具函数和生成器
  - 配置测试运行环境
  - _需求: 所有需求_

- [ ] 2. 数据库设计和初始化
  - 安装Prisma和PostgreSQL驱动
  - 根据设计文档创建Prisma schema
  - 生成数据库迁移文件
  - 初始化Redis连接配置
  - _需求: 所有需求的基础_

- [ ] 2.1 创建数据库种子数据
  - 创建测试用户数据
  - 创建会员套餐数据
  - 创建示例工作流模板
  - _需求: 2.1, 7.1_

- [ ] 3. 实现认证服务
  - 实现用户注册API
  - 实现邮箱验证功能
  - 实现登录和JWT生成
  - 实现登录失败锁定机制
  - _需求: 1.2, 1.3, 1.4, 1.5_

- [ ]* 3.1 编写属性测试：注册后账号创建
  - **属性 1: 注册后账号创建和邮件发送**
  - **验证需求: 1.2**

- [ ]* 3.2 编写属性测试：邮箱验证激活
  - **属性 2: 邮箱验证激活账号**
  - **验证需求: 1.3**

- [ ]* 3.3 编写属性测试：登录返回令牌
  - **属性 3: 正确凭证返回有效令牌**
  - **验证需求: 1.4**

- [ ]* 3.4 编写属性测试：登录锁定机制
  - **属性 4: 登录失败锁定机制**
  - **验证需求: 1.5**

- [ ] 4. 实现用户服务
  - 实现用户资料查询API
  - 实现用户资料更新API
  - 实现会员信息查询API
  - 实现积分管理逻辑
  - _需求: 1.1, 2.1_

- [ ] 5. 实现支付服务
  - 集成微信支付SDK
  - 集成支付宝支付SDK
  - 实现订单创建API
  - 实现支付回调处理
  - 实现会员到期提醒定时任务
  - _需求: 2.2, 2.3, 2.4, 2.5_

- [ ]* 5.1 编写属性测试：支付返回URL
  - **属性 5: 支付请求返回支付URL**
  - **验证需求: 2.2**

- [ ]* 5.2 编写属性测试：支付成功更新状态
  - **属性 6: 支付成功更新会员状态**
  - **验证需求: 2.3**

- [ ]* 5.3 编写属性测试：支付失败回滚
  - **属性 7: 支付失败回滚订单**
  - **验证需求: 2.4**

- [ ]* 5.4 编写属性测试：会员到期提醒
  - **属性 8: 会员到期提醒**
  - **验证需求: 2.5**

- [ ] 6. 实现内容服务 - 选题功能
  - 实现热门话题抓取和分析
  - 实现选题搜索API
  - 实现选题大纲生成
  - 实现选题保存和管理
  - _需求: 3.1, 3.2, 3.3, 3.4_

- [ ]* 6.1 编写属性测试：选题搜索相关性
  - **属性 9: 选题搜索返回相关结果**
  - **验证需求: 3.2**

- [ ]* 6.2 编写属性测试：选题大纲完整性
  - **属性 10: 选题大纲包含必需字段**
  - **验证需求: 3.3**

- [ ]* 6.3 编写属性测试：选题保存检索
  - **属性 11: 选题保存后可检索**
  - **验证需求: 3.4**

- [ ] 7. 实现内容服务 - 自动创作链路
  - 实现文案脚本生成API
  - 实现视频素材生成/匹配
  - 实现内容预览功能
  - 实现多平台发布API
  - _需求: 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ]* 7.1 编写属性测试：文案生成完整性
  - **属性 12: 文案生成包含必需字段**
  - **验证需求: 4.2**

- [ ]* 7.2 编写属性测试：视频素材生成
  - **属性 13: 视频素材生成返回URL**
  - **验证需求: 4.3**

- [ ]* 7.3 编写属性测试：发布状态返回
  - **属性 14: 发布返回状态**
  - **验证需求: 4.5**

- [ ] 8. 实现工作流服务
  - 实现工作流CRUD API（包含分类和标签）
  - 实现Webhook URL验证
  - 实现Webhook调用逻辑
  - 实现工作流执行和积分扣除
  - 实现执行历史记录
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5, 6.1, 6.2, 6.3, 6.4_

- [ ]* 8.1 编写属性测试：Webhook验证
  - **属性 15: 工作流上传验证Webhook**
  - **验证需求: 5.4**

- [ ]* 8.2 编写属性测试：工作流保存检索
  - **属性 16: 工作流保存后可检索**
  - **验证需求: 5.4**

- [ ]* 8.3 编写属性测试：Webhook调用
  - **属性 17: 工作流执行调用Webhook**
  - **验证需求: 5.5**

- [ ]* 8.4 编写属性测试：测试返回响应数据
  - **属性 18: 工作流测试返回响应数据**
  - **验证需求: 6.4**

- [ ]* 8.5 编写属性测试：工作流执行扣除积分
  - **属性 40: 工作流执行扣除积分**
  - **验证需求: 5, 6**

- [ ]* 8.6 编写属性测试：积分不足拒绝执行
  - **属性 41: 积分不足拒绝执行**
  - **验证需求: 5, 6**

- [ ] 9. 实现模板服务
  - 实现模板库查询API
  - 实现模板详情API
  - 实现模板使用（复制）功能
  - 实现模板上传和验证
  - 实现模板搜索功能
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5_

- [ ]* 9.1 编写属性测试：模板使用创建工作流
  - **属性 19: 模板使用后出现在工作流列表**
  - **验证需求: 7.3**

- [ ]* 9.2 编写属性测试：模板上传可见性
  - **属性 20: 模板上传后可见**
  - **验证需求: 7.4**

- [ ]* 9.3 编写属性测试：模板搜索匹配
  - **属性 21: 模板搜索匹配关键词**
  - **验证需求: 7.5**

- [ ] 10. 实现工具服务 - 文案工具
  - 实现文案提取API
  - 实现文案二创API
  - 实现文案保存到内容库
  - _需求: 8.1, 8.2, 8.3, 8.5_

- [ ]* 10.1 编写属性测试：文案提取结构化
  - **属性 22: 文案提取返回结构化数据**
  - **验证需求: 8.1, 8.2**

- [ ]* 10.2 编写属性测试：文案二创多版本
  - **属性 23: 文案二创生成多个版本**
  - **验证需求: 8.3**

- [ ]* 10.3 编写属性测试：文案保存检索
  - **属性 24: 文案保存后可在内容库检索**
  - **验证需求: 8.5**

- [ ] 11. 实现工具服务 - 分析工具
  - 实现账号拆解API
  - 实现视频拆解API
  - 实现分析报告生成
  - 实现PDF导出功能
  - _需求: 9.1, 9.2, 9.3, 9.4, 9.5_

- [ ]* 11.1 编写属性测试：账号分析完整性
  - **属性 25: 账号分析返回必需字段**
  - **验证需求: 9.1, 9.2**

- [ ]* 11.2 编写属性测试：视频拆解完整性
  - **属性 26: 视频拆解返回必需字段**
  - **验证需求: 9.3**

- [ ]* 11.3 编写属性测试：拆解结果时间轴
  - **属性 27: 拆解结果包含时间轴**
  - **验证需求: 9.4**

- [ ]* 11.4 编写属性测试：PDF导出有效性
  - **属性 28: 导出生成有效PDF**
  - **验证需求: 9.5**

- [ ] 12. 实现平台服务
  - 实现抖音OAuth集成
  - 实现小红书OAuth集成
  - 实现视频号OAuth集成
  - 实现账号管理API
  - 实现平台内容格式适配
  - 实现授权过期检测和提醒
  - _需求: 10.1, 10.2, 10.3, 10.4, 10.5_

- [ ]* 12.1 编写属性测试：OAuth凭证安全存储
  - **属性 29: OAuth授权安全存储凭证**
  - **验证需求: 10.2**

- [ ]* 12.2 编写属性测试：平台格式适配
  - **属性 30: 平台发布格式适配**
  - **验证需求: 10.3**

- [ ]* 12.3 编写属性测试：账号删除清除凭证
  - **属性 31: 账号删除清除凭证**
  - **验证需求: 10.4**

- [ ]* 12.4 编写属性测试：授权过期提醒
  - **属性 32: 授权过期发送提醒**
  - **验证需求: 10.5**

- [ ] 13. 实现团队管理服务
  - 实现团队成员管理API
  - 实现成员邀请功能
  - 实现积分配额管理
  - 实现配额超限检测
  - 实现团队数据统计
  - _需求: 11.1, 11.2, 11.3, 11.4, 11.5_

- [ ]* 13.1 编写属性测试：成员邀请邮件
  - **属性 33: 成员邀请发送邮件**
  - **验证需求: 11.2**

- [ ]* 13.2 编写属性测试：配额设置保存
  - **属性 34: 配额设置正确保存**
  - **验证需求: 11.4**

- [ ]* 13.3 编写属性测试：超出配额阻止
  - **属性 35: 超出配额阻止使用**
  - **验证需求: 11.5**

- [ ] 14. 实现分析服务
  - 实现数据概览API
  - 实现内容详细分析API
  - 实现时间范围过滤
  - 实现数据报告导出（Excel）
  - _需求: 12.1, 12.2, 12.3, 12.5_

- [ ]* 14.1 编写属性测试：时间范围过滤
  - **属性 36: 时间范围过滤数据**
  - **验证需求: 12.2**

- [ ]* 14.2 编写属性测试：Excel导出有效性
  - **属性 37: 导出生成有效Excel**
  - **验证需求: 12.5**

- [ ] 15. 实现API配置服务
  - 实现API配置管理API
  - 实现API Key验证逻辑
  - 实现节点库动态启用
  - _需求: 13.1, 13.2, 13.3, 13.4_

- [ ]* 15.1 编写属性测试：API Key保存
  - **属性 38: 有效API Key保存成功**
  - **验证需求: 13.2**

- [ ]* 15.2 编写属性测试：配置启用节点
  - **属性 39: API Key配置启用节点**
  - **验证需求: 13.4**

- [ ] 16. 实现文件存储服务
  - 配置OSS/S3客户端
  - 实现文件上传API
  - 实现文件删除API
  - 实现文件访问URL生成
  - _需求: 4.3, 7.4, 9.5_

- [ ] 17. 实现前端 - 认证模块
  - 创建登录页面组件
  - 创建注册页面组件
  - 创建邮箱验证组件
  - 实现认证状态管理
  - 实现路由守卫
  - _需求: 1.1, 1.2, 1.3, 1.4_

- [ ] 18. 实现前端 - 支付模块
  - 创建套餐展示页面
  - 创建支付弹窗组件
  - 实现支付状态轮询
  - 创建订单历史页面
  - _需求: 2.1, 2.2, 2.3_

- [ ] 19. 实现前端 - 内容创作模块
  - 创建选题页面
  - 创建内容编辑器
  - 创建内容预览组件
  - 创建发布面板
  - _需求: 3.1, 3.2, 3.3, 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ] 20. 实现前端 - 工作流模块
  - 创建工作流列表页面
  - 创建工作流详情页面
  - 创建工作流执行界面
  - 创建执行日志组件
  - 创建工作流上传表单
  - _需求: 5.1, 5.2, 5.4, 5.5, 6.4_

- [ ] 21. 实现前端 - 模板库模块
  - 创建模板库页面
  - 创建模板卡片组件
  - 创建模板详情页面
  - 实现模板搜索功能
  - _需求: 7.1, 7.2, 7.3, 7.5_

- [ ] 22. 实现前端 - 工具箱模块
  - 创建工具箱首页
  - 创建文案提取工具界面
  - 创建文案二创工具界面
  - 创建账号拆解工具界面
  - 创建视频拆解工具界面
  - _需求: 8.1, 8.2, 8.3, 9.1, 9.2, 9.3_

- [ ] 23. 实现前端 - 平台管理模块
  - 创建账号管理页面
  - 创建账号绑定流程
  - 创建发布历史页面
  - _需求: 10.1, 10.2, 10.3_

- [ ] 24. 实现前端 - 数据分析模块
  - 创建数据仪表板
  - 创建内容指标组件
  - 创建趋势图表组件
  - 实现数据导出功能
  - _需求: 12.1, 12.2, 12.3, 12.5_

- [ ] 25. 实现前端 - 团队管理模块
  - 创建团队管理页面
  - 创建成员列表组件
  - 创建成员邀请表单
  - 创建配额管理界面
  - _需求: 11.1, 11.2, 11.4_

- [ ] 26. 实现前端 - 响应式设计
  - 实现移动端适配
  - 实现平板端适配
  - 优化触摸交互
  - 测试不同设备和浏览器
  - _需求: 14.1, 14.2, 14.3, 14.4_

- [ ] 27. 实现API网关和中间件
  - 实现JWT认证中间件
  - 实现API限流中间件
  - 实现请求日志中间件
  - 实现错误处理中间件
  - _需求: 所有需求_

- [ ] 28. 实现后台任务队列
  - 配置Bull队列
  - 实现邮件发送任务
  - 实现会员到期检测任务
  - 实现授权过期检测任务
  - 实现数据统计任务
  - _需求: 1.2, 2.5, 10.5_

- [ ] 29. 集成外部AI服务
  - 集成RunningHub API
  - 实现选题生成调用
  - 实现文案生成调用
  - 实现内容分析调用
  - _需求: 3.2, 4.2, 8.3, 9.1, 9.3_

- [ ] 30. 安全加固
  - 实现密码加密存储
  - 实现敏感数据加密
  - 实现CSRF保护
  - 实现XSS防护
  - 实现SQL注入防护
  - _需求: 所有需求_

- [ ] 31. 性能优化
  - 实现Redis缓存策略
  - 优化数据库查询
  - 实现CDN加速
  - 实现图片懒加载
  - _需求: 所有需求_

- [ ] 32. 部署和运维
  - 编写Docker配置文件
  - 配置生产环境变量
  - 设置数据库备份策略
  - 配置监控和告警
  - 编写部署文档
  - _需求: 所有需求_

- [ ] 33. 最终检查点
  - 确保所有测试通过，如有问题请向用户咨询
